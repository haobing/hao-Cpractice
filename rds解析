#include<stdio.h>
#include<stdlib.h>

//RDS数据包类型和长度
typedef struct TypeAndLong{
    unsigned  int Type;
    unsigned  int Long;
}TYPEANDLONG;
//资源编码数量
char RscEcodNum;

//资源编码和保留位
struct RscEcod{
    int KeepBit;
    char RscEcodStr[25];
};
//数据包时刻
char RsdTime[5];
//数字证书编号
char RsdCertNum[7];
//数字签名
char DataSign[66];

//类型00
struct FreFeature{
    unsigned char   OderNum;
    unsigned char ProNum;
    unsigned double Frequency;
}
struct ScanSet{
    unsigned char Num;
    struct FreFeature *Fre;
}

//类型01



//读取三个字节
char string[3];
//第一步，确定数据包类型和长度
TYPEANDLONG GetRdsType(char *string)
{
    TYPEANDLONG typelong;
    if(string==NULL){
        printf("the string is NULL")
        exit(1);
    }
    typelong.Type=string[0]&0x1f;
    typelong.Long=(string[1]<<3)+(string.[0]>>5);
    return typelong;
}

//第二步，确定资源编码数量
unsigned char GetRscEcodNum(char *string)
{
    unsigned  char num;
    if(string==NULL){
        printf("the string is NULL\n");
        exit(1);
    }
    num=string[2];
    return num;
}

TYPEANDLONG typelong=GetRdsType(string);
unsigned char RscEcodNum=GetRscEcodNum(string);


//第三步确定资源编码内容
//读取剩下的字节string[typelong.Long-3]
//1,确定一个资源编码内容
void GetOneRscEco(char *RsdString,struct RscEcod *RscEcoCon)
{   char *string=RsdString
    RscEcoCon->KeepBit=string[0]&0xf;
    RscEcoCon->RscEcodStr[0]=(string[0]>>4)&0xf;
   for(int i=1;i<=22;i++){
       if((i%2)==1)
       RscEcoCon->RscEcodStr[i]=string[(i/2)+1]&0xf;
       else if((i%2)==0)
       RscEcoCon->RscEcodStr[i]=(string[(i/2)]>>4)&0xf;   
   }
}
//2,确定N个资源编码内容
void GetRscEcodCon(char *RsdString,struct RscEcod *RscEcoCon)
{
    char *string=RsdString;
    for(int i=0;i<RscEcodNum;i++){
        GetOneRscEco(string,RscEcoCon);
        string+=12;
        RscEcoCon++;
    }
}

//第三步确定数据包内容









unsigned int DateNum=typelong.Long-3-RscEcodNum*12-74;
